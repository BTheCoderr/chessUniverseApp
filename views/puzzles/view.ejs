<%- include('../partials/header') %>

<div class="puzzle-view-container">
    <div class="puzzle-board-section">
        <div class="board-container">
            <div id="board" class="chess-board"></div>
            <div class="board-controls">
                <button id="resetBtn" class="control-btn">
                    <i class="fas fa-undo"></i> Reset
                </button>
                <button id="hintBtn" class="control-btn">
                    <i class="fas fa-lightbulb"></i> Hint
                </button>
                <button id="nextBtn" class="control-btn" style="display: none;">
                    <i class="fas fa-forward"></i> Next Puzzle
                </button>
            </div>
        </div>
    </div>

    <div class="puzzle-info-section">
        <div class="puzzle-details">
            <h2 id="puzzleTitle">Loading puzzle...</h2>
            <p id="puzzleDescription" class="description"></p>
            <div class="puzzle-meta">
                <span class="rating">Rating: <span id="puzzleRating">-</span></span>
                <span class="themes">Themes: <span id="puzzleThemes">-</span></span>
            </div>
        </div>

        <div class="move-history">
            <h3>Move History</h3>
            <div id="moveList" class="move-list"></div>
        </div>

        <div id="status" class="status-message">
            Your turn to move...
        </div>
    </div>
</div>

<style>
.puzzle-view-container {
    display: flex;
    gap: 20px;
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.puzzle-board-section {
    flex: 1;
    min-width: 400px;
}

.board-container {
    background: white;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.chess-board {
    width: 100%;
    margin-bottom: 15px;
}

.board-controls {
    display: flex;
    gap: 10px;
    justify-content: center;
}

.control-btn {
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    background: #f0f0f0;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 5px;
}

.control-btn:hover {
    background: #e0e0e0;
}

.puzzle-info-section {
    flex: 1;
    min-width: 300px;
    max-width: 400px;
}

.puzzle-details {
    background: white;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 20px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.description {
    margin: 10px 0;
    color: #666;
}

.puzzle-meta {
    display: flex;
    gap: 15px;
    color: #666;
    font-size: 0.9em;
}

.move-history {
    background: white;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 20px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.move-list {
    height: 200px;
    overflow-y: auto;
    padding: 10px;
    background: #f5f5f5;
    border-radius: 4px;
}

.status-message {
    background: white;
    border-radius: 8px;
    padding: 15px;
    margin-top: 20px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    text-align: center;
    font-weight: bold;
}

@media (max-width: 768px) {
    .puzzle-view-container {
        flex-direction: column;
    }

    .puzzle-board-section,
    .puzzle-info-section {
        min-width: 100%;
    }
}
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/chessboard-1.0.0.min.js"></script>
<script src="/js/puzzle-solver.js"></script>

<%- include('../partials/footer') %> 