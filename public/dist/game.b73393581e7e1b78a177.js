(self.webpackChunksimplechessapp=self.webpackChunksimplechessapp||[]).push([[485],{407:()=>{var e=null,n=new Chess,t=null,o="white",i="white",c={white:null,black:null};function a(e,t){return!n.game_over()&&(i===o&&(!("white"===o&&-1!==t.search(/^b/)||"black"===o&&-1!==t.search(/^w/))&&void 0))}function r(e,o){if(null===n.move({from:e,to:o,promotion:"q"}))return"snapback";i="white"===i?"black":"white",m(),t&&t.emit("move",{from:e,to:o,promotion:"q"})}function d(){e.position(n.fen())}function m(){var e="",t="w"===n.turn()?"White":"Black";n.in_checkmate()?e="Game over, ".concat(t," is in checkmate."):n.in_draw()?e="Game over, drawn position":(e="".concat(t," to move"),n.in_check()&&(e+=", ".concat(t," is in check"))),document.getElementById("gameStatus").textContent=e,function(){var e=n.history({verbose:!0}),t=document.getElementById("movesList");t.innerHTML="";for(var o=0;o<e.length;o+=2){var i=Math.floor(o/2)+1,c=e[o],a=e[o+1],r=document.createElement("div");r.className="move-pair",r.innerHTML="\n            ".concat(i,". ").concat(c.san,"\n            ").concat(a?" "+a.san:"","\n        "),t.appendChild(r)}t.scrollTop=t.scrollHeight}()}function l(e){var n=Math.floor(c[e]/60),t=c[e]%60,o="".concat(n,":").concat(t.toString().padStart(2,"0"));document.querySelector(".".concat(e,"-timer")).textContent=o}function s(){(t=io()).on("connect",(function(){t.emit("join",{type:gameConfig.type,mode:gameConfig.mode,guestId:gameConfig.guestId,guestUsername:gameConfig.guestUsername})})),t.on("gameStart",(function(n){o=n.color,document.getElementById("whiteUsername").textContent=n.white,document.getElementById("blackUsername").textContent=n.black,"black"===o&&e.orientation("black"),document.getElementById("resignBtn").disabled=!1,document.getElementById("drawBtn").disabled=!1,function(){var e=gameConfig.timeControl.initial;c={white:e,black:e},l("white"),l("black")}()})),t.on("move",(function(t){n.move(t),e.position(n.fen()),i="w"===n.turn()?"white":"black",m()})),t.on("gameOver",(function(e){alert(e.message),document.getElementById("resignBtn").disabled=!0,document.getElementById("drawBtn").disabled=!0}))}document.addEventListener("DOMContentLoaded",(function(){e=Chessboard("board",{draggable:!0,position:"start",onDragStart:a,onDrop:r,onSnapEnd:d,pieceTheme:"/img/pieces/{piece}.png"}),window.addEventListener("resize",e.resize),s(),function(){var n=document.getElementById("resignBtn"),o=document.getElementById("drawBtn"),i=document.getElementById("flipBoardBtn"),c=document.getElementById("findOpponentBtn");n.addEventListener("click",(function(){confirm("Are you sure you want to resign?")&&t.emit("resign")})),o.addEventListener("click",(function(){t.emit("offerDraw")})),i.addEventListener("click",(function(){e.flip()})),c&&c.addEventListener("click",(function(){t.emit("findOpponent"),c.disabled=!0,c.textContent="Finding opponent..."}))}(),function(){var t=document.getElementById("prevMove"),o=document.getElementById("nextMove");t.addEventListener("click",(function(){n.undo(),e.position(n.fen()),m()})),o.addEventListener("click",(function(){}))}(),m()}))}},e=>{var n;n=407,e(e.s=n)}]);
//# sourceMappingURL=game.b73393581e7e1b78a177.js.map